<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nicho Studios</title>
    <link rel="" href="loja.js" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Geostar+Fill&display=swap"
      rel="stylesheet"
    />

    <link
      href="https://fonts.googleapis.com/css2?family=Alef:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Quantico:ital,wght@0,400;0,700;1,400;1,700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="fundo">
      <img id="fundo1" src="img/site/tribal1.png" alt="" />
      <img id="fundo2" src="img/site/tribal2.png" alt="">
    </div>
    <header>
      <div class="upHeader">
        <div class="scrolling-text">
          <p>Sem a mÃºsica, a vida seria um erro.</p>
          <p>A lei nÃ£o Ã© o refÃºgio do oprimido, mas a arma do opressor.</p>
          <p>A paz Ã© dichavada e bolada na seda, tranquilidade existe enquanto a brasa ta acesa!</p>
          <p>Sem a mÃºsica, a vida seria um erro.</p>
          <p>A lei nÃ£o Ã© o refÃºgio do oprimido, mas a arma do opressor.</p>
          <p>A paz Ã© dichavada e bolada na seda, tranquilidade existe enquanto a brasa ta acesa!</p>
          <p>Sem a mÃºsica, a vida seria um erro.</p>
          <p>A lei nÃ£o Ã© o refÃºgio do oprimido, mas a arma do opressor.</p>
          <p>A paz Ã© dichavada e bolada na seda, tranquilidade existe enquanto a brasa ta acesa!</p>
        </div>
      </div>

      <nav>
        <div class="upNav">
          <div class="logo">
            <a href="index.html">Nicho Studios</a>
            <ul>
              <li><a href="#sobre">Sobre</a></li>
              <li><a href="#produtos">Produtos</a></li>
            </ul>
          </div>
        </div>
        <ul class="socialMedia">
          <li>
            <a href="#car" id="abrirCarrinho"><img src="img/icon/shopping_bag_24dp_FFF_FILL0_wght400_GRAD0_opsz24.svg" alt=""/></a>
          </li>
          <li>
            <a href="https://wa.me/5511987984929?text=OlÃ¡!%20Quero%20fazer%20um%20pedido%20ğŸ˜Š" target="_blank" class="btn-whatsapp" title="Fale conosco no WhatsApp"><img src="img/icon/whatsapp-svgrepo-com.svg" alt=""
            /></a>
          </li>
          <li>
            <a href="https://www.instagram.com/notmagnuu/" target="_blank"><img src="img/icon/instagram-svgrepo-com.svg" alt=""></a>
          </li>
        </ul>
      </nav>
    </header>
    <audio id="musica" autoplay loop>
      <source src="img/site/WhatsApp Video 2025-10-19 at 11.29.18.mp4" type="audio/mpeg">
    </audio>
    
    <button id="botaoMusica"> ></button>
    <div id="carrinho" class="carrinho">
      <span class="iconeCarrinho" onclick="toggleCarrinho()">
        <img src="img/icon/fechar.svg" alt="">
      </span>
      <h2>Carrinho</h2>
      <ul id="listaCarrinho"></ul>
      <p><strong>Total: R$ <span id="total">0.00</span></strong></p>
      <button id="comprar" onclick="enviarWhatsApp()">Finalizar Compra</button>
    </div>
  <div class="mainCard">
    <div class="card" id="card">
      <div id="display" class="text-block hebrew" aria-live="polite" aria-atomic="true">
        é™å®šã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã€ä¸€ç‚¹ã‚‚ã®ã®æœã€ãã—ã¦ãƒ¬ãƒˆãƒ­ãªé­‚ã‚’å®¿ã—ãŸç™ºè¦‹ã€‚ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®å¤–å´ã§ç”Ÿãã‚‹äººã€…ã®ãŸã‚ã«ã€å³é¸ã•ã‚ŒãŸé€¸å“ã®æ•°ã€…ã€‚
      </div>
      <div id="sub" class="sub hebrew">
        é™å®šç‰ˆã®ä½œå“ â€” å€‹æ€§ã‚’æ±‚ã‚ã‚‹äººã®ãŸã‚ã®æœ¬ç‰©ã€‚
      </div>
    </div>
  </div>
    <main>
      <section id="fotosMoldel">
        <div class="fotos" >
          <div class="foto" id="fotoMd1">
            <div class="guiaF">

              <img src="img/site/guia.png" alt="">
            </div>
            <div class="imgModel">
              <p class="editfake">File  Edit  Search  Help</p>
              <img id="model1" class="modelo">
              <img src="img/icon/caixaSom.png" alt="" class="som">
            </div>
          </div>
          <div class="foto" id="fotoMd2">
            <div class="guiaF">
              <img src="img/site/guia.png" alt="">
            </div>
            <div class="imgModel">
              <p class="editfake">File  Edit  Search  Help</p>
              <img id="model2" class="modelo">
              <img src="img/icon/caixaSom.png" alt="" class="som">
            </div>
          </div>
          <div class="foto" id="fotoMd3">
            <div class="guiaF">
              <img src="img/site/guia.png" alt="">
            </div>
            <div class="imgModel">
              <p class="editfake">File  Edit  Search  Help</p>
              <img id="model3" class="modelo">
              <img src="img/icon/caixaSom.png" alt="" class="som">
            </div>
          </div>
        </div>
      </section>
    <section id="produtos">
      <h2 class="titulos">Produtos</h2>
      <div class="contProduto" id="listaProdutos"></div>

      <div id="modalProduto" class="modal">
        <div class="conteudo">
          <div class="barra">
            <span class="icone" onclick="fecharModal()"><img src="img/icon/fechar.svg" alt=""></span>
            <span class="icone"><img src="img/icon/janela.svg" alt=""></span>
            <span class="icone"><img src="img/icon/minimizar.svg" alt=""></span>
          </div>
          <div class="desc">
            <p class="editfake">File  Edit  Search  Help</p>
            <img id="imagemProduto" src="" alt="">
            <h2 id="tituloProduto"></h2>
            <p id="precoProdutoModal" class="precoModal"></p>
            <p id="descricaoProduto"></p>
            <button onclick="addCarrinho()">Adicionar</button>
            
          </div>
        </div>
      </div>

    </section>
    <section id="sobre"> 
      <h2 class="titulos"">Sobre nÃ³s</h2>
      <p>
        O Nicho Studios Ã© um espaÃ§o digital inspirado na estÃ©tica cyber-dark dos
        anos 2000. Cada peÃ§a conta uma histÃ³ria â€” um fragmento de uma era
        perdida entre o analÃ³gico e o digital. Somos um refÃºgio para quem busca
        o diferente, o glitch, o erro bonito.
      </p>
    </section>
  </main>
    <footer>
      <p>Â© 2025 Nicho Studios â€” â€œSem a mÃºsica, a vida seria um erro.â€</p>
    </footer>
  </body>
</html>
<script>
 // ==========================
// VARIÃVEIS GLOBAIS
// ==========================
let produtoSelecionado = null;
let carrinho = [];
let produtos = {}; // â† garante que existe
let numeroWhatsApp = "5511987984929";

// ==========================
// CARREGAR MODELOS
// ==========================
fetch("data/modelos.json")
  .then(r => r.json())
  .then(data => {
    document.getElementById("model1").src = data["1"];
    document.getElementById("model2").src = data["2"];
    document.getElementById("model3").src = data["3"];
  });

// ==========================
// CARREGAR PRODUTOS
// ==========================
fetch("data/produtos.json")
  .then(r => r.json())
  .then(data => {
    produtos = data; // â† agora GLOBAL funciona

    const lista = document.getElementById("listaProdutos");
    lista.innerHTML = "";

    Object.keys(produtos).forEach(id => {
      const p = produtos[id];

      const btn = document.createElement("button");
      btn.classList.add("btnProduto");

      btn.addEventListener("click", () => abrirModal(id));

      btn.innerHTML = `
        <div class="produto">
          <img src="${p.imagem}" alt="${p.titulo}">
        </div>
      `;

      lista.appendChild(btn);
    });
  });

// ==========================
// MODAL
// ==========================
function abrirModal(id) {
  const produto = produtos[id];

  if (!produto) {
    console.error("Produto nÃ£o encontrado:", id);
    return;
  }

  produtoSelecionado = produto;

  document.getElementById("tituloProduto").textContent = produto.titulo;
  document.getElementById("descricaoProduto").textContent = produto.descricao;

  // Corrige preÃ§o mesmo se vier como string
  document.getElementById("precoProdutoModal").textContent =
    "R$ " + Number(produto.preco).toFixed(2);

  document.getElementById("imagemProduto").src = produto.imagem;

  document.getElementById("modalProduto").style.display = "block";
}

function fecharModal() {
  document.getElementById("modalProduto").style.display = "none";
}

window.onclick = e => {
  const modal = document.getElementById("modalProduto");
  if (e.target === modal) fecharModal();
};

// ==========================
// CARRINHO
// ==========================
function addCarrinho() {
  if (!produtoSelecionado) {
    alert("Nenhum produto selecionado!");
    return;
  }

  carrinho.push(produtoSelecionado);
  atualizarCarrinho();
  fecharModal();

  document.getElementById("carrinho").classList.add("aberto");
}

function atualizarCarrinho() {
  const lista = document.getElementById("listaCarrinho");
  lista.innerHTML = "";

  let total = 0;

  carrinho.forEach((item, index) => {
    total += Number(item.preco);

    const li = document.createElement("li");

    li.innerHTML = `
      ${item.titulo} â€” R$ ${Number(item.preco).toFixed(2)}
      <button class="remover" onclick="removerItem(${index})">X</button>
    `;

    lista.appendChild(li);
  });

  document.getElementById("total").textContent = total.toFixed(2);
}

function removerItem(index) {
  carrinho.splice(index, 1);
  atualizarCarrinho();
}

function toggleCarrinho() {
  document.getElementById("carrinho").classList.toggle("aberto");
}

document.getElementById("abrirCarrinho")
  .addEventListener("click", toggleCarrinho);

// ==========================
// ENVIAR PEDIDO WHATSAPP
// ==========================
function enviarWhatsApp() {
  if (carrinho.length === 0) {
    alert("Seu carrinho estÃ¡ vazio!");
    return;
  }

  let mensagem = "ğŸ›ï¸ *Novo pedido via site:*%0A%0A";

  carrinho.forEach((item, i) => {
    mensagem += `${i + 1}. ${item.titulo} â€” R$ ${Number(item.preco).toFixed(2)}%0A`;
  });

  const total = carrinho.reduce((acc, item) => acc + Number(item.preco), 0);
  mensagem += `%0AğŸ’° *Total:* R$ ${total.toFixed(2)}`;

  const link = `https://wa.me/${numeroWhatsApp}?text=${mensagem}`;
  window.open(link, "_blank");
}

  // ==== MÃºsica ====
  const audio = document.getElementById('musica');
  const botao = document.getElementById('botaoMusica');
  let tocando = true;

  // tenta iniciar automaticamente
  window.addEventListener('load', () => {
    const playPromise = audio.play();
    if (playPromise !== undefined) {
      playPromise.catch(() => {
        // se o autoplay for bloqueado, mostra botÃ£o pra iniciar
        botao.textContent = '=';
        tocando = false;
      });
    }
  });

  botao.addEventListener('click', () => {
    if (!tocando) {
      audio.play();
      botao.textContent = '=';
    } else {
      audio.pause();
      botao.textContent = '>';
    }
    tocando = !tocando;
  });
  // ==== Textos hebraico/portuguÃªs ====
  const TEXTS = {
    he: {
      main: "é™å®šã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã€ä¸€ç‚¹ã‚‚ã®ã®æœã€ãã—ã¦ãƒ¬ãƒˆãƒ­ãªé­‚ã‚’å®¿ã—ãŸç™ºè¦‹ã€‚ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®å¤–å´ã§ç”Ÿãã‚‹äººã€…ã®ãŸã‚ã«ã€å³é¸ã•ã‚ŒãŸé€¸å“ã®æ•°ã€…ã€‚",
      sub: "é™å®šç‰ˆã®ä½œå“ â€” å€‹æ€§ã‚’æ±‚ã‚ã‚‹äººã®ãŸã‚ã®æœ¬ç‰©ã€‚",
    },
    pt: {
      main: "coleÃ§Ãµes exclusivas, roupas Ãºnicas e achados com alma retrÃ´. Tudo cuidadosamente selecionado para quem vive fora do algoritmo.",
      sub: "PeÃ§as limitadas â€” autenticidade para quem busca personalidade.",
    },
  };

  const display = document.getElementById("display");
  const sub = document.getElementById("sub");
  const card = document.getElementById("card");
  let currentLang = "he";

  function toggleLanguage() {
    currentLang = currentLang === "he" ? "pt" : "he";
    const isHeb = currentLang === "he";
    display.textContent = TEXTS[currentLang].main;
    sub.textContent = TEXTS[currentLang].sub;
    card.setAttribute("dir", isHeb ? "rtl" : "ltr");
    display.className = isHeb ? "hebrew" : "portuguese";
    sub.className = isHeb ? "hebrew" : "portuguese";
  }

  setTimeout(() => {
    toggleLanguage();
    setInterval(toggleLanguage, 5000);
  }, 2000);


 

  (function () {
  const filters = ['blink-invert', 'blink-sepia', 'blink-both'];
  const config = {
    minInterval: 800,  // tempo mÃ­nimo entre piscadas
    maxInterval: 2500, // tempo mÃ¡ximo entre piscadas
    minDuration: 50,  // duraÃ§Ã£o mÃ­nima
    maxDuration: 100,  // duraÃ§Ã£o mÃ¡xima
    maxElements: 2     // nÃºmero mÃ¡ximo de elementos piscando
  };

  // Respeita acessibilidade (usuÃ¡rios com reduÃ§Ã£o de movimento)
  if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) return;

  const randBetween = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;
  const randomFilter = () => filters[Math.floor(Math.random() * filters.length)];

  function randomElement() {
    const elements = [...document.querySelectorAll('*')].filter(
      el => el.offsetParent && !['HTML', 'BODY', 'SCRIPT', 'STYLE'].includes(el.tagName)
    );
    return elements.length ? elements[Math.floor(Math.random() * elements.length)] : null;
  }

  function blinkElement(el) {
    const filter = randomFilter();
    el.classList.add(filter);
    setTimeout(() => el.classList.remove(filter), randBetween(config.minDuration, config.maxDuration));
  }

  function loop() {
    const count = randBetween(1, config.maxElements);
    for (let i = 0; i < count; i++) {
      const el = randomElement();
      if (el) blinkElement(el);
    }
    setTimeout(loop, randBetween(config.minInterval, config.maxInterval));
  }

  loop(); // inicia o efeito
})();

</script>
